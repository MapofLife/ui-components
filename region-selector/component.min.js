/*! 2015-09-30 */
angular.module("mol-region-selector-templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("mol-region-selector.html",'<div class=modal-content><div class=modal-header><button type=button ng-click=$close() tabindex=-1 class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class=modal-title>Select Region</h4></div><div class=modal-body><div class=row><div class="form-group col-md-6 col-xs-12"><ui-select autofocus ng-model=regionTypes.selected on-select=regionTypeSelected() class=region-selector-control><ui-select-match allow-clear placeholder="Region type...">{{$select.selected.region_type_name}}</ui-select-match><ui-select-choices repeat="regionType in regionTypes.available | filter: $select.search"><small ng-bind-html="regionType.region_type_name | highlight: $select.search | to_trusted"></small></ui-select-choices></ui-select></div><div class="form-group col-md-6 col-xs-12"><ui-select ng-model=regions.selected class=region-selector-control><ui-select-match allow-clear placeholder=Region...>{{$select.selected.region_name}}</ui-select-match><ui-select-choices repeat="region in regions.available | filter: $select.search"><small ng-bind-html="region.region_name | highlight: $select.search | to_trusted"></small></ui-select-choices></ui-select></div></div><div class=modal-footer><button type=button class="btn btn-default" tabindex=-1 data-dismiss=modal aria-label=Close ng-click=$close()>Cancel</button> <button type=button ng-disabled=!regions.selected.region_type ng-click=regionSelectionComplete() class="btn btn-primary">Select</button></div></div></div>')}]),angular.module("mol.region-selector",["mol-region-selector-templates"]).directive("molRegionSelector",["$modal","$http","$cookies","MOLApiX",function($modal,$http,$cookies,MOLApiX){return{restrict:"A",scope:{location:"@location"},controller:function($scope){MOLApiX("searchregion").then(function(results){$scope.regionTypes=[{region_type:"mountain_region",region_type_name:"Mountain Region"}]})},link:function(scope,element,attrs,ctrl){element.bind("click",function(){var modal=$modal.open({animmation:!0,templateUrl:"mol-region-selector.html",controller:function($scope){$scope.regions={selected:{},available:[]},$scope.regionTypes={selected:{},available:scope.regionTypes},$scope.regionSelectionComplete=function(){$scope.location=$scope.regions.selected,modal.close()},$scope.regionTypeSelected=function(){$scope.regions={selected:{},available:[]},MOLApiX("searchregion",{type:$scope.regionTypes.selected.region_type}).then(function(results){$scope.regions.available=results.data})}}})})}}}]),function(){var cssText=".region-selector-control .form-control{width:100%;max-width:100%}",styleEl=document.createElement("style");if(document.getElementsByTagName("head")[0].appendChild(styleEl),styleEl.styleSheet)styleEl.styleSheet.disabled||(styleEl.styleSheet.cssText=cssText);else try{styleEl.innerHTML=cssText}catch(e){styleEl.innerText=cssText}}();