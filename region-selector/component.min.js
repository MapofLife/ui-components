/*! 2015-10-01 */
angular.module("mol-region-selector-templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("mol-region-selector.html",'<div class=modal-content><div class=modal-header><button type=button ng-click=$close() tabindex=-1 class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class=modal-title>Select Region</h4></div><div class="modal-body region-selector"><div class=row><div class="form-group col-md-6 col-xs-12"><ui-select autofocus ng-model=$parent.regionType><ui-select-match allow-clear placeholder="Select a Region Type">{{$select.selected.name}}</ui-select-match><ui-select-choices repeat="reg in regionTypes | filter: $select.search"><small ng-bind-html="reg.name | highlight: $select.search | to_trusted"></small></ui-select-choices></ui-select></div><div class="form-group col-md-6 col-xs-12"><input class=form-control autocomplete=on ng-model=regionName.value placeholder="Select a Region" typeahead="reg.name for reg in searchRegion($viewValue)" typeahead-on-select=regionSelected($item)></div></div><div class=modal-footer><button type=button class="btn btn-default" tabindex=-1 data-dismiss=modal aria-label=Close ng-click=$close()>Cancel</button> <button type=button ng-click=regionSelectionComplete() ng-disabled="!(regionRecord || regionType)" class="btn btn-primary">Select</button></div></div></div>')}]),angular.module("mol.region-selector",["mol-region-selector-templates"]).directive("molRegionSelector",["$modal","molApiX",function($modal,molApiX){return{restrict:"A",scope:{region:"=region",width:"=width",height:"=height"},controller:function($scope){$scope.regionTypes=[{type:"mountain_region",name:"Mountain Region"}]},link:function(scope,element,attrs,ctrl){element.bind("click",function(){var modal=$modal.open({animmation:!0,templateUrl:"mol-region-selector.html",controller:function($scope){$scope.regionTypes=scope.regionTypes,$scope.regionSelectionComplete=function(){$scope.regionRecord?scope.region=$scope.regionRecord:$scope.regionType&&(scope.region={type:$scope.regionType.type}),modal.close()},$scope.regionSelected=function($item){$scope.regionRecord=$item},$scope.searchRegion=function(text){$scope.regionRecord=void 0;var type=$scope.regionType?$scope.regionType.type:void 0;return molApiX("searchregion",{type:type,name:text}).then(function(results){return results.data})}}})})}}}]),function(){var cssText=".region-selector .form-control{width:100%;max-width:100%}",styleEl=document.createElement("style");if(document.getElementsByTagName("head")[0].appendChild(styleEl),styleEl.styleSheet)styleEl.styleSheet.disabled||(styleEl.styleSheet.cssText=cssText);else try{styleEl.innerHTML=cssText}catch(e){styleEl.innerText=cssText}}();